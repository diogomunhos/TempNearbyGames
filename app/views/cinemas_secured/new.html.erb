<div id="content-container" ng-controller="new-cinema-controller">

    <div id="page-title">
        <h1 class="page-header text-overflow">New Cinema</h1>
    </div>

    <div id="page-content" ng-cloak>
        <div class="form-group" id="messages">
            <%= raw flash_message %>
        </div>

        <div class="panel">
            <input type="hidden" id="hidden_cinema_companies" value="<%= @cinemaCompanies %>"/>
            <input type="hidden" id="hidden_companies" value="<%= @companies %>"/>
            <input type="hidden" id="hidden_cinema_file" value="<%= @companies %>"/>

                <div id="demo-cls-wz">
                    
                    <!--Nav-->
                    <ul class="wz-nav-off wz-icon-inline wz-classic" style="border-bottom: solid;">
                        <li class="col-xs-3" ng-class="{'bg-mint': cinema.stage >= 1}">
                            <a href="">
                                <span class="icon-wrap icon-wrap-xs"><i class="pli-pencil-ruler icon-lg"></i></span> Cinema Details
                            </a>
                        </li>
                        <li class="col-xs-3" ng-class="{'bg-mint': cinema.stage >= 2}">
                            <a href="">
                                <span class="icon-wrap icon-wrap-xs"><i class="pli-file-pictures icon-lg"></i></span> Cinema Image
                            </a>
                        </li>
                        <li class="col-xs-3" ng-class="{'bg-mint': cinema.stage >= 3}">
                            <a href="">
                                <span class="icon-wrap icon-wrap-xs"><i class="pli-newspaper-2 icon-lg"></i></span> Cinema Companies
                            </a>
                        </li>
                    </ul>

                    <!--Form-->
                    <form class="form-horizontal" style="margin-top: 20px;">
                        <div class="panel-body">
                            <div class="tab-content">

                                <!--First tab-->
                                <div id="demo-cls-tab2" class="tab-pane" ng-class="{active: cinema.stage == 1, in: cinema.stage == 1, fade: cinema.stage != 1}">
                                    <div id="all-details">
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_name">Name:*</label>
                                                <div class="col-lg-5">
                                                    <input type="text" class="form-control" ng-change="onChangeName(cinema.name.value)" placeholder="Name" name="cinema[name]" ng-model="cinema.name.value" id="cinema_name">
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.name.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.name.errorCode, "name")}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_cinema_url">Cinema URL:*</label>
                                                <div class="col-lg-5">
                                                    <input type="text" required="" class="form-control" ng-disabled="true" ng-class="{error_input: cinema.cinema_url.errorCode != ''}" name="cinema[cinema_url]" id="cinema_cinema_url" ng-model="cinema.cinema_url.value">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_release_date">Release date:*</label>
                                                <div class="col-lg-5">
                                                    <input type="text" class="form-control" placeholder="Release date" name="cinema[release_date]" ng-model="cinema.release_date.value" id="cinema_release_date">
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.release_date.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.release_date.errorCode, "release_date")}}</p>
                                                </div>
                                            </div>
                                        </div>         

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" ng-class="{error_label: cinema.type.errorCode != ''}">Type:* </label>
                                                <div class="col-lg-3">
                                                    <select class="form-control selectpicker" name="cinema[cinema_platform]" id="cinema_type" ng-model="cinema.type.value">
                                                        <option value="Movie">Movie</option>
                                                        <option value="Serie">Serie</option>
                                                        <option value="TV Show">TV Show</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.type.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.type.errorCode, "type")}}</p>
                                                </div>
                                            </div>
                                        </div>                                

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_wahiga_rating">Wahiga rating:</label>
                                                <div class="col-lg-5">
                                                    <input type="text" class="form-control" placeholder="Wahiga rating" name="cinema[wahiga_rating]" ng-model="cinema.wahiga_rating.value" id="cinema_wahiga_rating">
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.wahiga_rating.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.wahiga_rating.errorCode, "wahiga_rating")}}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_user_rating">User rating:</label>
                                                <div class="col-lg-5">
                                                    <input type="text" class="form-control" placeholder="User rating" name="cinema[user_rating]" ng-model="cinema.user_rating.value" id="cinema_user_rating">
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.user_rating.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.user_rating.errorCode, "user_rating")}}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_description">Description:</label>
                                                <div class="col-lg-5">
                                                    <input type="text" class="form-control" placeholder="Description" name="cinema[description]" ng-model="cinema.description.value" id="cinema_description"/>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.description.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.description.errorCode, "description")}}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" for="cinema_description">Trailer URL:</label>
                                                <div class="col-lg-5">
                                                    <input type="text" class="form-control" placeholder="Trailer URL" name="cinema[trailer]" ng-model="cinema.trailer.value" id="cinema_trailer"/>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.trailer.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.trailer.errorCode, "trailer")}}</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <label class="col-lg-3 control-label" ng-class="{error_label: cinema.genre.errorCode != ''}">Genres:* </label>
                                                <div class="col-lg-3">
                                                    <select class="form-control selectpicker" name="cinema[genre]" ng-change="changePickListValue('genre');" multiple id="cinema_genre" ng-model="cinema.genre.value">
                                                        <option value="Action">Action</option>
                                                        <option value="Biographical">Biographical</option>
                                                        <option value="Animated">Animated</option>
                                                        <option value="Adventure">Adventure</option>  
                                                        <option value="British">British</option>
                                                        <option value="Comedy">Comedy</option>
                                                        <option value="Detective/Mystery">Detective/Mystery</option>
                                                        <option value="Childrens - Kids - Family-Oriented">Childrens - Kids - Family-Oriented</option>
                                                        <option value="Classic">Classic</option>
                                                        <option value="Crime/Gangster">Crime/Gangster</option>  
                                                        <option value="Disaster">Disaster</option>
                                                        <option value="Drama">Drama</option>
                                                        <option value="Fantasy">Fantasy</option>
                                                        <option value="Cult">Cult</option>
                                                        <option value="Epics/Historical">Epics/Historical</option>
                                                        <option value="Noir">Noir</option>   
                                                        <option value="Documentary">Documentary</option>
                                                        <option value="Horror">Horror</option>
                                                        <option value="Guy">Guy</option>
                                                        <option value="Serial">Serial</option>
                                                        <option value="Musicals">Musicals</option>
                                                        <option value="Melodramas">Melodramas</option>
                                                        <option value="Sexual">Sexual</option>
                                                        <option value="Science Fiction">Science Fiction</option>
                                                        <option value="Road">Road</option>
                                                        <option value="Silent">Silent</option>
                                                        <option value="War">War</option>
                                                        <option value="Romance">Romance</option>
                                                        <option value="Westerns">Westerns</option>    
                                                        <option value="Sports">Sports</option>
                                                        <option value="Supernatural">Supernatural</option>
                                                        <option value="Thriller-Suspense">Thriller-Suspense</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row" ng-show="cinema.genre.errorCode != ''">
                                                <div class="col-lg-8 col-lg-offset-3">
                                                    <p class="error_form_message">{{getErrorByCode(cinema.genre.errorCode, "genre")}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--Second tab-->
                                <div id="demo-cls-tab3" class="tab-pane" ng-class="{active: cinema.stage == 2, in: cinema.stage == 2, fade: cinema.stage != 2}" >
                                    <%= render '/cinemas_secured/new_cinema_upload_image' %>
                                </div>

                                <!--Third tab-->
                                <div id="demo-cls-tab4" class="tab-pane mar-btm" ng-class="{active: cinema.stage == 3, in: cinema.stage == 3, fade: cinema.stage != 3}">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div >
                                                <button class="btn btn-primary" ng-click="newCinemaCompany()">New Company</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" ng-show="cinemaCompanies.length > 0">
                                        <div class="panel-body">
                                            <div class="table-responsive">
                                                <table class="table table-striped">
                                                    <thead>
                                                        <tr>
                                                            <th>Name</th>
                                                            <th>Type</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="gc in cinemaCompanies">
                                                            <td>
                                                                <select class="form-control" ng-model="gc.company_id"
                                                                ng-options="company.id as company.name for company in companies"
                                                                >
                                                                    <option
                                                                            value="company.id">
                                                                      {{company.name}}
                                                                    </option>
                                                                </select>   
                                                            </td>
                                                            <td>
                                                                <select class="form-control" ng-model="gc.company_type">
                                                                    <option value="Developer">Developer</option>
                                                                    <option value="Publisher">Publisher</option>
                                                                </select>
                                                            </td>
                                                            <td><button type="button" class="btn btn-sm btn-danger" ng-click="destroyCinemaCompany($index)">Remove</button></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!--Footer button-->
                        <div class="panel-footer text-right">
                            <div class="box-inline">
                                <button type="button" class="previous btn btn-mint" ng-show="cinema.stage > 1" ng-disabled="isSubmitting" style="margin-right: 5px;"ng-click="previous();">Previous</button>
                                <button type="button" class="next btn" ng-class="{'btn-mint': !isSubmitting, 'btn-default': isSubmitting}" ng-show="cinema.stage < 3" ng-disabled="isSubmitting" ng-click="next();"><i class="ion-load-a" ng-show="isSubmitting"></i><span ng-hide="isSubmitting">Next</span></button>
                                <button type="button" class="finish btn btn-mint" ng-show="cinema.stage === 3" g-class="{'btn-mint': !isSubmitting, 'btn-default': isSubmitting}" ng-click="finish();"><i class="ion-load-a" ng-show="isSubmitting"></i><span ng-hide="isSubmitting">Finish</span></button>
                            </div>
                        </div>
                    </form>
                </div>
        </div>
    </div>
</div>